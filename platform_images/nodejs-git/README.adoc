# NODEJS-GIT

this container will checkout any public nodejs git project and run it in a docker container

depends on nodejs-image existing

compatible nodejs projects on github must have app.js in root folder to work



### Example

```
 ./run_any.sh simplenode https://github.com/fuzzy-logic/simplenode.git 8888 4444
```

then test with curl -X GET http://localhost:4444



### Notes
Currently using the -link approach, which seems a little crap from what I've read, but it is at least working.


# Instructions

### Create Base Nodejs Image 

to get these core platform services (registry & proxy) running you first need to create the generic nodejs-image which can be used for any node project on github:

```
cd /simplepaas/platform_images/nodejs-image/
./create.sh
```

Once you've done that you can run the scripts to create the sp_proxy and sp_registry platform services...


### Create Registry Image & Container 

First create the sp_registry image & container which the proxy depends upon to work correctly (I beleive it must be running before you start the proxy so the docker -link argument works). This script will also run a curl command to create a 'testservice' entry in the registry which points to http://www.google.com:80/

```
cd /simplepaas/platform_images/nodejs-git/
./run_sp_registry.sh
```

### Create Proxy Image & Container 

Once the registry is running you can start the proxy. The run script for the proxy also has a test curl command to hit the 'test service'. When the command finishes you should see output from http://www.google.com:80/ as the curl command has requested to use the 'testservice' via the Host header:

```
cd /simplepaas/platform_images/nodejs-git/
./init_sp_proxy.sh
```


You should see some output from google's servers if it worked correctly:

```
<HTML><HEAD><meta http-equiv="content-type" content="text/html;charset=utf-8">
<TITLE>302 Moved</TITLE></HEAD><BODY>
<H1>302 Moved</H1>
The document has moved
<A HREF="http://www.google.co.uk/?gfe_rd=cr&amp;ei=0mNFU5zHAYnn7AbnsIG4Dw">here</A>.
</BODY></HTML>
```
